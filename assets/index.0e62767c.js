var le=Object.defineProperty;var oe=(e,t,n)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var x=(e,t,n)=>(oe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function k(){}function ee(e){return e()}function J(){return Object.create(null)}function A(e){e.forEach(ee)}function te(e){return typeof e=="function"}function ne(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function fe(e){return Object.keys(e).length===0}function _(e,t){e.appendChild(t)}function v(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode&&e.parentNode.removeChild(e)}function m(e){return document.createElement(e)}function N(e){return document.createTextNode(e)}function E(){return N(" ")}function ue(){return N("")}function B(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function w(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ce(e){return Array.from(e.childNodes)}function K(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Q(e,t,n){e.classList[n?"add":"remove"](t)}let H;function q(e){H=e}const P=[],U=[],L=[],V=[],ae=Promise.resolve();let D=!1;function de(){D||(D=!0,ae.then(ie))}function M(e){L.push(e)}const j=new Set;let I=0;function ie(){const e=H;do{for(;I<P.length;){const t=P[I];I++,q(t),pe(t.$$)}for(q(null),P.length=0,I=0;U.length;)U.pop()();for(let t=0;t<L.length;t+=1){const n=L[t];j.has(n)||(j.add(n),n())}L.length=0}while(P.length);for(;V.length;)V.pop()();D=!1,j.clear(),q(e)}function pe(e){if(e.fragment!==null){e.update(),A(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(M)}}const O=new Set;let $;function me(){$={r:0,c:[],p:$}}function _e(){$.r||A($.c),$=$.p}function z(e,t){e&&e.i&&(O.delete(e),e.i(t))}function F(e,t,n,i){if(e&&e.o){if(O.has(e))return;O.add(e),$.c.push(()=>{O.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function X(e){e&&e.c()}function R(e,t,n,i){const{fragment:s,after_update:r}=e.$$;s&&s.m(t,n),i||M(()=>{const l=e.$$.on_mount.map(ee).filter(te);e.$$.on_destroy?e.$$.on_destroy.push(...l):A(l),e.$$.on_mount=[]}),r.forEach(M)}function W(e,t){const n=e.$$;n.fragment!==null&&(A(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function he(e,t){e.$$.dirty[0]===-1&&(P.push(e),de(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(e,t,n,i,s,r,l,c=[-1]){const o=H;q(e);const f=e.$$={fragment:null,ctx:[],props:r,update:k,not_equal:s,bound:J(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:J(),dirty:c,skip_bound:!1,root:t.target||o.$$.root};l&&l(f.root);let p=!1;if(f.ctx=n?n(e,t.props||{},(d,g,...h)=>{const a=h.length?h[0]:g;return f.ctx&&s(f.ctx[d],f.ctx[d]=a)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](a),p&&he(e,d)),g}):[],f.update(),p=!0,A(f.before_update),f.fragment=i?i(f.ctx):!1,t.target){if(t.hydrate){const d=ce(t.target);f.fragment&&f.fragment.l(d),d.forEach(y)}else f.fragment&&f.fragment.c();t.intro&&z(e.$$.fragment),R(e,t.target,t.anchor,t.customElement),ie()}q(o)}class re{$destroy(){W(this,1),this.$destroy=k}$on(t,n){if(!te(n))return k;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(t){this.$$set&&!fe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ye(e){let t,n,i,s,r,l=e[0].productName+"",c,o,f,p,d=e[0].lifeCycle10y+"",g;return{c(){t=m("main"),n=m("div"),i=m("div"),s=m("div"),r=m("h4"),c=N(l),o=E(),f=m("div"),p=m("h4"),g=N(d),w(s,"class","flip-card-front svelte-yf8g2z"),w(f,"class","flip-card-back svelte-yf8g2z"),w(i,"class","flip-card-inner svelte-yf8g2z"),w(n,"class","flip-card svelte-yf8g2z"),w(t,"class","svelte-yf8g2z"),Q(t,"flipped",e[1])},m(h,a){v(h,t,a),_(t,n),_(n,i),_(i,s),_(s,r),_(r,c),_(i,o),_(i,f),_(f,p),_(p,g)},p(h,[a]){a&1&&l!==(l=h[0].productName+"")&&K(c,l),a&1&&d!==(d=h[0].lifeCycle10y+"")&&K(g,d),a&2&&Q(t,"flipped",h[1])},i:k,o:k,d(h){h&&y(t)}}}function ge(e,t,n){let{item:i={category:void 0,productName:void 0,production:void 0,transportDistanceKm:void 0,maintenance:void 0,liquidate:void 0,lifeCycle10y:void 0,lifeCycle70y:void 0}}=t,{flipped:s=!1}=t;return e.$$set=r=>{"item"in r&&n(0,i=r.item),"flipped"in r&&n(1,s=r.flipped)},[i,s]}class Y extends re{constructor(t){super(),se(this,t,ge,ye,ne,{item:0,flipped:1})}}var C=(e=>(e[e.NotStarted=0]="NotStarted",e[e.Playing=1]="Playing",e[e.Finished=2]="Finished",e))(C||{});class be{constructor(){x(this,"points",0);x(this,"n_rounds_left",3);x(this,"items");x(this,"state",0)}set quizItems(t){this.items=t}get isNotStarted(){return this.state==0}get isPlaying(){return this.state==1}get isFinished(){return this.state==2}getnextPair(){return this.state=1,this.nextRound(),[this.items.pop(),this.items.pop(),this.state]}nextRound(){this.n_rounds_left==0&&(this.state=2),this.n_rounds_left--}submitAnswer(t,n){console.log(t.lifeCycle10y,n.lifeCycle10y),t.lifeCycle10y>n.lifeCycle10y&&this.points++}}async function Z(){let i=(await(await fetch("./quiz_data.csv")).text()).split(`
`);return i.pop(),i.splice(1).map(r=>r.split(",")).map(r=>({category:r[0],productName:r[1],transportDistanceKm:parseInt(r[2]),maintenance:parseInt(r[3]),liquidate:parseInt(r[4]),lifeCycle10y:parseInt(r[5]),lifeCycle70y:parseInt(r[6])}))}function ve(e){let t,n,i=e[0].points+"",s;return{c(){t=m("h1"),n=N("Total score: "),s=N(i)},m(r,l){v(r,t,l),_(t,n),_(t,s)},p(r,l){l&1&&i!==(i=r[0].points+"")&&K(s,i)},i:k,o:k,d(r){r&&y(t)}}}function we(e){let t,n,i,s,r,l,c,o,f,p,d,g,h;r=new Y({props:{flipped:e[4],item:e[1]}}),o=new Y({props:{flipped:e[5],item:e[2]}});let a=e[4]&&e[5]&&e[3]==C.Playing&&G(e);return{c(){t=m("h2"),t.textContent="Which of the following materials have the lowest CO2 emmisions?",n=E(),i=m("div"),s=m("button"),X(r.$$.fragment),l=E(),c=m("button"),X(o.$$.fragment),f=E(),a&&a.c(),p=ue(),w(t,"class","question"),w(s,"class","transparent svelte-1xvwgn6"),w(c,"class","transparent svelte-1xvwgn6"),w(i,"class","cards svelte-1xvwgn6")},m(u,b){v(u,t,b),v(u,n,b),v(u,i,b),_(i,s),R(r,s,null),_(i,l),_(i,c),R(o,c,null),v(u,f,b),a&&a.m(u,b),v(u,p,b),d=!0,g||(h=[B(s,"click",e[7]),B(c,"click",e[8])],g=!0)},p(u,b){const T={};b&16&&(T.flipped=u[4]),b&2&&(T.item=u[1]),r.$set(T);const S={};b&32&&(S.flipped=u[5]),b&4&&(S.item=u[2]),o.$set(S),u[4]&&u[5]&&u[3]==C.Playing?a?a.p(u,b):(a=G(u),a.c(),a.m(p.parentNode,p)):a&&(a.d(1),a=null)},i(u){d||(z(r.$$.fragment,u),z(o.$$.fragment,u),d=!0)},o(u){F(r.$$.fragment,u),F(o.$$.fragment,u),d=!1},d(u){u&&y(t),u&&y(n),u&&y(i),W(r),W(o),u&&y(f),a&&a.d(u),u&&y(p),g=!1,A(h)}}}function ke(e){let t,n,i,s,r;return{c(){t=m("h1"),t.textContent="Carbon quiz",n=E(),i=m("button"),i.textContent="Start",w(i,"class","big-button svelte-1xvwgn6")},m(l,c){v(l,t,c),v(l,n,c),v(l,i,c),s||(r=B(i,"click",e[6]),s=!0)},p:k,i:k,o:k,d(l){l&&y(t),l&&y(n),l&&y(i),s=!1,r()}}}function G(e){let t,n,i;return{c(){t=m("button"),t.textContent="Next question",w(t,"class","big-button svelte-1xvwgn6")},m(s,r){v(s,t,r),n||(i=B(t,"click",e[6]),n=!0)},p:k,d(s){s&&y(t),n=!1,i()}}}function $e(e){let t,n,i,s;const r=[ke,we,ve],l=[];function c(o,f){return o[3]==C.NotStarted?0:o[3]==C.Playing?1:o[3]==C.Finished?2:-1}return~(n=c(e))&&(i=l[n]=r[n](e)),{c(){t=m("main"),i&&i.c(),w(t,"class","svelte-1xvwgn6")},m(o,f){v(o,t,f),~n&&l[n].m(t,null),s=!0},p(o,[f]){let p=n;n=c(o),n===p?~n&&l[n].p(o,f):(i&&(me(),F(l[p],1,1,()=>{l[p]=null}),_e()),~n?(i=l[n],i?i.p(o,f):(i=l[n]=r[n](o),i.c()),z(i,1),i.m(t,null)):i=null)},i(o){s||(z(i),s=!0)},o(o){F(i),s=!1},d(o){o&&y(t),~n&&l[n].d()}}}function Ce(e,t,n){const i=new be;Z().then(g=>{n(0,i.items=g,i)}),Z().then(console.log);let s,r,l=C.NotStarted,[c,o]=[!1,!1];return[i,s,r,l,c,o,()=>{n(4,[c,o]=[!1,!1],c,n(5,o)),setTimeout(()=>n(1,[s,r,l]=i.getnextPair(),s,n(2,r),n(3,l)),200)},()=>{n(4,c=!0),setTimeout(()=>n(5,o=!0),300),i.submitAnswer(s,r)},()=>{n(5,o=!0),setTimeout(()=>n(4,c=!0),300),i.submitAnswer(r,s)}]}class Ne extends re{constructor(t){super(),se(this,t,Ce,$e,ne,{})}}new Ne({target:document.getElementById("app")});
